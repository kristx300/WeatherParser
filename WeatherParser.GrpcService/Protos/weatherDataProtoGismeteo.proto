syntax = "proto3";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/wrappers.proto";


option csharp_namespace = "WeatherParser.GrpcService.Services";

package WeatherDataProtoGismeteo;

service WeatherDataProtoGismeteo {
  rpc SaveWeatherData (WeatherDataSaveRequest) returns (google.protobuf.Empty) {}
  rpc GetAllWeatherData (google.protobuf.Timestamp) returns (WeatherDataGetResponse) {}
  rpc GetFirstDate(google.protobuf.Empty) returns (google.protobuf.Timestamp) {}
  rpc GetLastDate (google.protobuf.Empty) returns (google.protobuf.Timestamp) {}
}

message WeatherDataSaveRequest {
  string url = 1;
  int32 day = 2;
}

message WeatherDataProto{
	google.protobuf.Timestamp CollectionDate = 1;
	google.protobuf.Timestamp Date = 2;
	Temperatures Temperatures = 3;
	Pressures Pressures = 4;
	Humidities Humidities = 5;
	WindSpeeds WindSpeeds = 6;
	WindDirections WindDirections = 7;
}

message Temperatures{
	repeated double Temperature = 1;
}

message Pressures{
	repeated int32 Pressure = 1;
}

message Humidities{
	repeated int32 Humidity = 1;
}

message WindSpeeds{
	repeated int32 WindSpeed = 1;
}

message WindDirections{
	repeated google.protobuf.StringValue WindDirection = 1;
}

message weatherDataList{
	repeated WeatherDataProto weatherDataList = 1;
}

message KeyValuePair {
  google.protobuf.Timestamp key = 1;
  weatherDataList value = 2;
}

message WeatherDataGetResponse {
	repeated KeyValuePair weatherDataDictionary = 1;
}
